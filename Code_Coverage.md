# Code Coverage

The purpose of code coverage is to ensure that unit test coverage is used
throughout your application. You SHOULD rely on continuous integration to
produce code coverage reports for you, and have at least 50% code coverage on
your testable code. See below for additional details.

Code coverage is mandatory for projects that match one or more of the following:

* Are product focused
* Will have a project development time of 1 year
* Has a total project development budget of 2000 hours

Other project types do not require code coverage to be run. Additionally,
projects that do match one or more of the above can have exemptions where:

* Project does not use continuous integration
* It is difficult or impossible to run code analysis (mobile applications that require tests to be run on actual devices or emulators)
* Project budget does not allow for code coverage

## Exempt Code

Code is considered exempt from code coverage analysis if:

* It is dynamically generated
* It is a simple, predictable, and proven pattern that resembles boilerplate.
  (Consider, could it could be generated by a T4 template if one were so
  inclined?)
* Is is an MVC or API controller

## Toolsets

For code coverage, OpenCover and ReportGenerator SHOULD be used. When generating
reports, consider publishing them to a location such that they can be accessible

[https://github.com/OpenCover/opencover](https://github.com/OpenCover/opencover)

[https://github.com/danielpalme/ReportGenerator](https://github.com/danielpalme/ReportGenerator)

Use the following sample code to get started:

[https://gist.github.com/kensykora/76524dd554b7f7969145](https://gist.github.com/kensykora/76524dd554b7f7969145)

```sh run-coverage.bat
if not exist coverage mkdir ..\coverage

..\packages\OpenCover.4.6.166\tools\OpenCover.Console.exe^
 -register:user^
 -target:"..\packages\NUnit.Runners.2.6.4\tools\nunit-console.exe"^
 -targetargs:"..\ClientNme.nunit -xml=..\TestResult.xml /noshadow"^
 -filter:"+[ClientName*]*  -[*.Tests*]*"^
 -output:..\coverage.xml

..\packages\ReportGenerator.2.3.2.0\tools\reportgenerator.exe -reports:..\coverage.xml -targetdir:..\coverage
```